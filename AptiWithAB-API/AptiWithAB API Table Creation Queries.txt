CREATE TABLE TEST (
	ID NUMBER(18) PRIMARY KEY,
	NAME VARCHAR2(50) NOT NULL UNIQUE,
	CREATEDBY VARCHAR2(50) NOT NULL,
	DURATION NUMBER(3) NOT NULL,
	NOOFQUESTIONS NUMBER(4) NOT NULL
);

CREATE TABLE SCHEDULE (
	ID NUMBER(18) PRIMARY KEY,
	TID NUMBER(18) REFERENCES TEST ON DELETE CASCADE,
	TDATE DATE NOT NULL,
	ISCONDUCTED VARCHAR2(1) NOT NULL
);

CREATE TABLE STUDENT (
	PRN NUMBER(8) PRIMARY KEY,
	NAME VARCHAR2(50) NOT NULL,
	BRANCH VARCHAR2(50) NOT NULL,
	EMAIL VARCHAR2(80) NOT NULL,
	CONTACTNO NUMBER(15) NOT NULL,
	PASSWORD VARCHAR2(50) NOT NULL
);

CREATE TABLE RESULT (
	ID NUMBER(18) PRIMARY KEY,
	PRN NUMBER(8) REFERENCES STUDENT ON DELETE CASCADE,
	TID NUMBER(18) REFERENCES TEST ON DELETE CASCADE,
	MARKS NUMBER(6, 2) NOT NULL,
	GRADE VARCHAR2(2) NOT NULL,
	TDATE DATE NOT NULL
);

CREATE TABLE QUESTION (
	NO NUMBER(18) PRIMARY KEY,
	TYPE VARCHAR2(50) NOT NULL,
	STATEMENT VARCHAR2(1000) NOT NULL,
	ANSWER VARCHAR2(500) NOT NULL,
	IMAGEURL VARCHAR2(500)
);

CREATE TABLE OPTIONS (
	NO NUMBER(18) REFERENCES QUESTION ON DELETE CASCADE,
	OPTNO NUMBER(1) NOT NULL,
	"OPTION" VARCHAR2(500) NOT NULL
);

CREATE TABLE FETCH_QUESTION (
	ID NUMBER(18) PRIMARY KEY,
	TID NUMBER(18) REFERENCES TEST ON DELETE CASCADE,
	NO NUMBER(18) REFERENCES QUESTION ON DELETE CASCADE,
	MARKS NUMBER(1) NOT NULL
);

FETCH_QUESTION
SELECT Q.NO, Q.TYPE, Q.STATEMENT, Q.ANSWER, FQ.MARKS FROM QUESTION Q, FETCH_QUESTION FQ WHERE Q.NO = FQ.NO AND TID = ?
SELECT Q.NO, Q.TYPE, Q.STATEMENT, Q.ANSWER, FQ.MARKS FROM QUESTION Q, FETCH_QUESTION FQ WHERE Q.NO = FQ.NO AND FQ.TID = ? AND FQ.NO = ?
INSERT INTO FETCH_QUESTION VALUES (fetchquestion_seq.NEXT_VAL, ?, ?, ?);
UPDATE FETCH_QUESTION SET MARKS = ? WHERE TID = ? AND NO = ?;

SEQUENCES
CREATE SEQUENCE test_seq START WITH 1;
CREATE SEQUENCE schedule_seq START WITH 1;
CREATE SEQUENCE result_seq START WITH 1;
CREATE SEQUENCE question_seq START WITH 1;
CREATE SEQUENCE fetchquestion_seq START WITH 1;

INSERT INTO STUDENT VALUES (11008036, 'Ashish Bagdane', 'IT', 'ashishbagdane1@gmail.com', 9422467897, '5$is5$');
INSERT INTO STUDENT VALUES (11008136, 'Amol Bagdane', 'Architecture', 'amolbagdane25@gmail.com', 8411928228, 'SM');
INSERT INTO STUDENT VALUES (11008536, 'Anjali Bagdane', 'Electronics', 'anjalibagdane@gmail.com', 9860563707, 'anjali');

INSERT INTO TEST VALUES (test_seq.NEXTVAL, 'Aptitude', 'Ashish Bagdane', 180, 60);
INSERT INTO TEST VALUES (test_seq.NEXTVAL, 'Java', 'Ashish Bagdane', 180, 60);
INSERT INTO TEST VALUES (test_seq.NEXTVAL, 'RESTful Web Services', 'Ashish Bagdane', 180, 60);

INSERT INTO RESULT VALUES (result_seq.NEXTVAL, 11008036, 24, 180.00, 'A+', SYSDATE);
INSERT INTO RESULT VALUES (result_seq.NEXTVAL, 11008036, 25, 180.00, 'A+', SYSDATE);
INSERT INTO RESULT VALUES (result_seq.NEXTVAL, 11008136, 26, 180.00, 'A+', SYSDATE);
INSERT INTO RESULT VALUES (result_seq.NEXTVAL, 11008536, 26, 180.00, 'A+', SYSDATE);

INSERT INTO SCHEDULE VALUES (schedule_seq.NEXTVAL, 24, SYSDATE, '0');
INSERT INTO SCHEDULE VALUES (schedule_seq.NEXTVAL, 25, SYSDATE + 1, '0');
INSERT INTO SCHEDULE VALUES (schedule_seq.NEXTVAL, 26, SYSDATE + 2, '0');
INSERT INTO SCHEDULE VALUES (schedule_seq.NEXTVAL, 24, SYSDATE - 4, '1');
INSERT INTO SCHEDULE VALUES (schedule_seq.NEXTVAL, 25, SYSDATE - 3, '1');
INSERT INTO SCHEDULE VALUES (schedule_seq.NEXTVAL, 24, SYSDATE - 10, '1');